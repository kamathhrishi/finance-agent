/* ========================================
   STRATALENS INDEX STYLES - REFINED
   Professional polish with improved UX
   ======================================== */

/* CRITICAL: Transcript Modal must appear above everything */
#transcriptModal {
    position: fixed !important;
    top: 0 !important;
    left: 0 !important;
    width: 100vw !important;
    height: 100vh !important;
    z-index: 2147483647 !important;
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
    background: rgba(0, 0, 0, 0.75) !important;
    backdrop-filter: blur(4px) !important;
}

#transcriptModal > * {
    z-index: 2147483647 !important;
}

/* Company Search Suggestions Styling - ENHANCED */
#companySuggestions {
    box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.07), 
                0 10px 20px -2px rgba(0, 0, 0, 0.08),
                0 0 0 1px rgba(0, 0, 0, 0.04);
    border-top: none;
    border-radius: 0 0 10px 10px;
    z-index: 99999 !important;
    position: absolute !important;
    pointer-events: auto !important;
    background: var(--bg-primary, #ffffff);
    overflow: hidden;
}

/* Make sure quick search buttons have lower z-index */
.company-quick-search {
    position: relative !important;
    z-index: 1 !important;
}

.company-suggestion {
    transition: all 0.15s cubic-bezier(0.16, 1, 0.3, 1);
    border-left: 3px solid transparent;
}

.company-suggestion:hover,
.company-suggestion.selected {
    background-color: rgba(0, 102, 204, 0.04);
    border-left-color: var(--accent-primary, #0066cc);
}

.company-suggestion:first-child {
    border-radius: 0;
}

.company-suggestion:last-child {
    border-radius: 0 0 10px 10px;
}

/* Focus ring for accessibility */
#companySearchInput:focus + #companySuggestions {
    border-color: var(--accent-primary, #0066cc);
}

/* Loading state for suggestions */
.suggestions-loading {
    padding: 16px;
    text-align: center;
    color: var(--text-tertiary, #64748b);
    font-size: 13px;
}

/* Enhanced visual hierarchy */
.company-suggestion .font-semibold {
    color: var(--text-primary, #0f172a);
    font-weight: 600;
}

.company-suggestion .text-text-secondary {
    color: var(--text-secondary, #475569);
}

.company-suggestion .text-text-tertiary {
    color: var(--text-tertiary, #64748b);
    font-size: 12px;
}

/* Dark mode adjustments */
html.dark .company-suggestion:hover,
html.dark .company-suggestion.selected {
    background-color: rgba(59, 130, 246, 0.1);
}

/* Company Profile Styling - REFINED */
.stat-card {
    background: var(--bg-primary, #ffffff);
    border: 1px solid var(--border-primary, #e2e8f0);
    border-radius: 10px;
    padding: 1rem 1.25rem;
    text-align: center;
    transition: all 0.2s cubic-bezier(0.16, 1, 0.3, 1);
    box-shadow: 0 1px 2px rgba(0, 0, 0, 0.02);
}

.stat-card:hover {
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.04);
    border-color: rgba(0, 102, 204, 0.15);
}

.stat-label {
    font-size: 11px;
    color: var(--text-tertiary, #64748b);
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.04em;
    margin-bottom: 6px;
}

.stat-value {
    font-size: 1.125rem;
    font-weight: 700;
    color: var(--text-primary, #0f172a);
    letter-spacing: -0.02em;
}

.tab-btn {
    padding: 0.625rem 1rem;
    border: none;
    background: none;
    color: var(--text-secondary, #475569);
    font-weight: 500;
    font-size: 0.875rem;
    cursor: pointer;
    border-bottom: 2px solid transparent;
    transition: all 0.15s cubic-bezier(0.16, 1, 0.3, 1);
    letter-spacing: -0.01em;
}

.tab-btn.active {
    color: var(--accent-primary, #0066cc);
    border-bottom-color: var(--accent-primary, #0066cc);
    font-weight: 600;
}

.tab-btn:hover {
    color: var(--accent-primary, #0066cc);
    background: rgba(0, 102, 204, 0.04);
}

.tab-content {
    display: none;
}

.tab-content.active {
    display: block;
}

.section-title {
    font-size: 18px;
    font-weight: 600;
    color: var(--text-primary, #1e293b);
    margin-bottom: 16px;
}

.overview-section {
    background: var(--bg-primary, #ffffff);
    border: 1px solid var(--border-primary, #e2e8f0);
    border-radius: 8px;
    padding: 20px;
}

.stats-grid {
    display: grid;
    gap: 12px;
}

.stat-row {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 8px 0;
    border-bottom: 1px solid var(--border-primary, #e2e8f0);
}

.stat-row:last-child {
    border-bottom: none;
}

.stat-row .stat-label {
    color: var(--text-secondary, #475569);
    font-size: 14px;
    font-weight: 500;
    text-transform: none;
    letter-spacing: normal;
}

.stat-row .stat-value {
    font-size: 14px;
    font-weight: 600;
    color: var(--text-primary, #1e293b);
}

.financial-card {
    background: var(--bg-primary, #ffffff);
    border: 1px solid var(--border-primary, #e2e8f0);
    border-radius: 8px;
    padding: 20px;
}

.financial-card-title {
    font-size: 16px;
    font-weight: 600;
    color: var(--text-primary, #1e293b);
    margin-bottom: 16px;
}

.financial-data {
    display: grid;
    gap: 12px;
}

.financial-item {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 8px 0;
}

.financial-item span:first-child {
    color: var(--text-secondary, #475569);
    font-size: 14px;
}

.financial-item span:last-child {
    font-weight: 600;
    color: var(--text-primary, #1e293b);
    font-size: 14px;
}

.profile-section {
    background: var(--bg-primary, #ffffff);
    border: 1px solid var(--border-primary, #e2e8f0);
    border-radius: 8px;
    padding: 20px;
}

.profile-title {
    font-size: 16px;
    font-weight: 600;
    color: var(--text-primary, #1e293b);
    margin-bottom: 16px;
}

.profile-text {
    color: var(--text-secondary, #475569);
    line-height: 1.6;
    font-size: 14px;
}

.profile-details {
    display: grid;
    gap: 12px;
}

.detail-row {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 8px 0;
    border-bottom: 1px solid var(--border-primary, #e2e8f0);
}

.detail-row:last-child {
    border-bottom: none;
}

.detail-label {
    color: var(--text-secondary, #475569);
    font-size: 14px;
    font-weight: 500;
}

.detail-value {
    font-weight: 600;
    color: var(--text-primary, #1e293b);
    font-size: 14px;
}

.detail-link {
    color: var(--accent-primary, #3b82f6);
    text-decoration: none;
    font-size: 14px;
}

.detail-link:hover {
    text-decoration: underline;
}

/* Positive/Negative numbers */
.positive {
    color: #10b981 !important;
}

.negative {
    color: #ef4444 !important;
}

/* Loading state */
.profile-loading {
    text-align: center;
    padding: 40px;
    color: var(--text-tertiary, #64748b);
}

/* Dark mode adjustments for profile */
html.dark .stat-card,
html.dark .overview-section,
html.dark .financial-card,
html.dark .profile-section {
    background-color: var(--slate-800, #1e293b);
    border-color: var(--slate-700, #374151);
}

/* Financial Tab Enhancements */
.financial-tabs {
    margin-bottom: 24px;
}

.financial-tab-buttons {
    border-bottom: 1px solid var(--border-primary, #e2e8f0);
    padding-bottom: 8px;
}

.financial-tab-btn {
    padding: 8px 16px;
    border: none;
    background: none;
    color: var(--text-secondary, #475569);
    font-weight: 500;
    cursor: pointer;
    border-radius: 6px;
    transition: all 0.2s ease;
    font-size: 14px;
}

.financial-tab-btn.active {
    background-color: var(--accent-primary, #3b82f6);
    color: white;
}

.financial-tab-btn:hover:not(.active) {
    background-color: var(--bg-tertiary, #f8fafc);
    color: var(--accent-primary, #3b82f6);
}

.financial-tab-content {
    display: none;
}

.financial-tab-content.active {
    display: block;
}

.financial-statements-table {
    width: 100%;
    border-collapse: collapse;
    margin-top: 16px;
}

.financial-statements-table th,
.financial-statements-table td {
    padding: 12px 16px;
    text-align: left;
    border-bottom: 1px solid var(--border-primary, #e2e8f0);
}

.financial-statements-table th {
    background-color: var(--bg-tertiary, #f8fafc);
    font-weight: 600;
    font-size: 14px;
    color: var(--text-primary, #1e293b);
    position: sticky;
    top: 0;
    z-index: 10;
}

.financial-statements-table td {
    font-size: 14px;
    color: var(--text-primary, #1e293b);
}

.financial-statements-table tbody tr:hover {
    background-color: var(--bg-tertiary, #f8fafc);
}

.financial-metric-row {
    font-weight: 600;
}

.financial-year-header {
    text-align: center;
    font-weight: 600;
    background-color: var(--accent-primary, #3b82f6);
    color: white;
}

.financial-positive {
    color: #10b981;
}

.financial-negative {
    color: #ef4444;
}

/* Segment Data Styling */
.segment-data {
    background: var(--bg-primary, #ffffff);
    border: 1px solid var(--border-primary, #e2e8f0);
    border-radius: 8px;
    padding: 20px;
    min-height: 200px !important;
    height: auto !important;
    overflow: visible !important;
    display: block !important;
}

.segment-chart-container {
    height: 300px;
    margin-bottom: 20px;
}

.segment-table {
    width: 100%;
    border-collapse: collapse;
    min-height: 200px !important;
    height: auto !important;
    display: table !important;
    width: 100% !important;
    border-collapse: collapse !important;
}

.segment-table th,
.segment-table td {
    padding: 12px;
    text-align: left;
    border-bottom: 1px solid var(--border-primary, #e2e8f0);
    padding: 8px 12px !important;
    border: 1px solid #e2e8f0 !important;
    display: table-cell !important;
}

.segment-table th {
    background-color: var(--bg-tertiary, #f8fafc);
    font-weight: 600;
    font-size: 14px;
}

.segment-percentage {
    font-weight: 600;
    color: var(--accent-primary, #3b82f6);
}

/* TTM Metrics Enhancements */
.ttm-metrics .financial-card {
    height: auto;
    min-height: 200px;
}

/* Loading Placeholders */
.loading-placeholder {
    background: var(--bg-secondary, #f8fafc);
    border: 1px dashed var(--border-primary, #e2e8f0);
    border-radius: 8px;
    display: flex;
    align-items: center;
    justify-content: center;
    min-height: 100px;
}

.loading-placeholder i {
    animation: spin 1s linear infinite;
}

@keyframes spin {
    from { transform: rotate(0deg); }
    to { transform: rotate(360deg); }
}

/* Tab Navigation Improvements */
.tab-buttons {
    scrollbar-width: none;
    -ms-overflow-style: none;
}

.tab-buttons::-webkit-scrollbar {
    display: none;
}

/* Dark mode for financial tabs */
html.dark .financial-tab-btn {
    color: var(--slate-400, #94a3b8);
}

html.dark .financial-tab-btn:hover:not(.active) {
    background-color: var(--slate-700, #374151);
    color: var(--blue-400, #60a5fa);
}

html.dark .financial-statements-table th {
    background-color: var(--slate-700, #374151);
    color: var(--slate-200, #e2e8f0);
}

html.dark .segment-data,
html.dark .loading-placeholder {
    background-color: var(--slate-800, #1e293b);
    border-color: var(--slate-600, #475569);
}

/* Sidebar Search Indicator Styling */
.sidebar-menu-item.search-active {
    background-color: var(--bg-tertiary, #f8fafc);
    border-left: 3px solid var(--accent-primary, #3b82f6);
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
}

.search-loading-icon {
    color: var(--accent-primary, #3b82f6);
    animation: spin 1s linear infinite;
}

.search-status-text {
    color: var(--accent-primary, #3b82f6);
    font-weight: 500;
    animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
}

/* Dark mode adjustments for sidebar search indicator */
html.dark .sidebar-menu-item.search-active {
    background-color: var(--slate-700, #374151);
    border-left-color: var(--blue-400, #60a5fa);
}

html.dark .search-loading-icon,
html.dark .search-status-text {
    color: var(--blue-400, #60a5fa);
}

@keyframes pulse {
    0%, 100% {
        opacity: 1;
    }
    50% {
        opacity: 0.5;
    }
}

/* Override CSS for search tab background */
.sidebar-menu-item.search-active {
    background-color: transparent !important;
}

html.dark .sidebar-menu-item.search-active {
    background-color: transparent !important;
}

/* Disabled sidebar items */
.sidebar-menu-item.disabled,
.sidebar-menu-item[aria-disabled="true"] {
    opacity: 0.5;
    cursor: not-allowed;
    pointer-events: auto; /* allow click to trigger modal */
}

.sidebar-menu-item.disabled i,
.sidebar-menu-item[aria-disabled="true"] i {
    color: var(--text-tertiary) !important;
}

/* Coming Soon modal - REFINED */
#comingSoonModal {
    position: fixed;
    inset: 0;
    display: none;
    align-items: center;
    justify-content: center;
    z-index: 999999;
}

#comingSoonModal.open { display: flex; }

#comingSoonModal .modal-backdrop {
    position: absolute;
    inset: 0;
    background: rgba(15, 23, 42, 0.6);
    backdrop-filter: blur(4px);
    -webkit-backdrop-filter: blur(4px);
}

#comingSoonModal .modal-card {
    position: relative;
    background: var(--bg-primary);
    color: var(--text-primary);
    border: 1px solid var(--border-primary);
    border-radius: 16px;
    padding: 24px;
    width: 90%;
    max-width: 400px;
    box-shadow: 0 20px 40px rgba(0, 0, 0, 0.15), 
                0 0 0 1px rgba(0, 0, 0, 0.03);
    animation: modalFadeIn 0.25s cubic-bezier(0.16, 1, 0.3, 1);
}

@keyframes modalFadeIn {
    from {
        opacity: 0;
        transform: scale(0.96) translateY(8px);
    }
    to {
        opacity: 1;
        transform: scale(1) translateY(0);
    }
}

#comingSoonModal .modal-actions {
    display: flex;
    justify-content: flex-end;
    gap: 10px;
    margin-top: 20px;
}

#comingSoonModal .btn-primary { 
    background: linear-gradient(135deg, var(--accent-primary) 0%, #0052a3 100%); 
    color: #fff; 
    border: none; 
    padding: 10px 16px; 
    border-radius: 8px;
    font-weight: 500;
    font-size: 0.875rem;
    cursor: pointer;
    transition: all 0.15s ease;
}

#comingSoonModal .btn-primary:hover {
    filter: brightness(1.05);
    transform: translateY(-1px);
}

#comingSoonModal .btn-secondary { 
    background: var(--bg-secondary); 
    color: var(--text-secondary); 
    border: 1px solid var(--border-primary); 
    padding: 10px 16px; 
    border-radius: 8px;
    font-weight: 500;
    font-size: 0.875rem;
    cursor: pointer;
    transition: all 0.15s ease;
}

#comingSoonModal .btn-secondary:hover {
    background: var(--bg-tertiary);
    color: var(--text-primary);
}


/* Table cell content handling for long values to prevent sidebar displacement */
.data-grid td {
    white-space: nowrap; /* Keep text on one line - JS handles truncation */
    padding: 12px 10px; /* Increased horizontal padding for better column spacing */
    vertical-align: middle;
    /* Remove all CSS-based truncation - let JavaScript handle 100-character limit */
}

.data-grid th {
    padding: 12px 10px; /* Match header padding with data cells */
    white-space: nowrap;
}

/* Allow symbol and name cells to be a bit wider but still constrained */
.data-grid td.symbol-cell {
    max-width: 250px; /* Increased for better readability */
}

/* Ensure number cells stay compact */
.data-grid td.number-cell {
    max-width: 180px; /* Slightly increased for formatted numbers */
    text-align: right;
}

/* Responsive table wrapper to prevent sidebar displacement */
.results-table-wrapper {
    overflow-x: auto;
    max-width: 100%; /* Let parent container handle the width constraint */
    width: 100%;
}

.data-grid {
    table-layout: auto; /* Let table auto-size columns based on content */
    width: 100%;
    min-width: 600px; /* Reduced minimum width to fit better */
}

/* FIXED: Ensure main content area never exceeds sidebar layout */
@media (min-width: 1024px) {
    main {
        max-width: calc(100vw - 264px); /* Account for 256px sidebar + 8px margin */
        margin-left: 0 !important;
        margin-right: 0 !important;
        box-sizing: border-box;
        overflow-x: hidden; /* Prevent horizontal overflow */
    }
}

/* CRITICAL FIX: Segment containers zero height issue */
#productSegmentsData, #geographicSegmentsData {
    min-height: 200px !important;
    height: auto !important;
    overflow: visible !important;
    display: block !important;
}

/* AGGRESSIVE FIX: Force all segment tables to be visible */
[id*="SegmentsData"] {
    min-height: 200px !important;
    height: auto !important;
    overflow: visible !important;
    display: block !important;
}

/* ========================================
   NEW UNIFORM COMPANY PROFILE STYLES
   ======================================== */

.company-profile-container {
    padding: 1rem;
    background: var(--bg-primary);
    border-radius: 12px;
    margin-bottom: 1rem;
}

/* Financial Tables Styling */
.financial-table-container {
    background: var(--bg-secondary);
    border-radius: 8px;
    padding: 1rem;
    margin-bottom: 1rem;
}

.table-header-info {
    margin-bottom: 1rem;
    padding-bottom: 0.5rem;
    border-bottom: 1px solid var(--border-primary);
}

.table-title {
    font-size: 1.1rem;
    font-weight: 600;
    color: var(--text-primary);
    margin: 0 0 0.25rem 0;
}

.table-subtitle {
    font-size: 0.875rem;
    color: var(--text-secondary);
    margin: 0;
}

.financial-table-wrapper {
    overflow-x: auto;
    border-radius: 6px;
    border: 1px solid var(--border-primary);
}

.financial-data-table {
    width: 100%;
    border-collapse: collapse;
    background: var(--bg-primary);
}

.financial-data-table th {
    background: var(--bg-tertiary);
    color: var(--text-primary);
    font-weight: 600;
    font-size: 0.875rem;
    padding: 0.75rem;
    text-align: left;
    border-bottom: 2px solid var(--border-primary);
}

.financial-data-table .year-header {
    text-align: center;
    min-width: 100px;
}

.financial-data-table .metric-header {
    min-width: 200px;
    position: sticky;
    left: 0;
    background: var(--bg-tertiary);
    z-index: 10;
}

.financial-data-table td {
    padding: 0.75rem;
    border-bottom: 1px solid var(--border-primary);
    font-size: 0.875rem;
}

.financial-data-table .metric-label {
    font-weight: 500;
    color: var(--text-primary);
    background: var(--bg-primary);
    position: sticky;
    left: 0;
    z-index: 5;
}

.financial-data-table .metric-value {
    text-align: right;
    font-weight: 600;
    color: var(--text-primary);
}

.financial-data-table tr:hover {
    background: var(--bg-tertiary);
}

.financial-data-table tr:hover .metric-label {
    background: var(--bg-tertiary);
}

/* Segments Tables Styling */
.segments-table-container {
    background: var(--bg-secondary);
    border-radius: 8px;
    padding: 1rem;
    margin-bottom: 1rem;
}

.segments-header-info {
    margin-bottom: 1rem;
    padding-bottom: 0.5rem;
    border-bottom: 1px solid var(--border-primary);
}

.segments-title {
    font-size: 1.1rem;
    font-weight: 600;
    color: var(--text-primary);
    margin: 0 0 0.25rem 0;
}

.segments-subtitle {
    font-size: 0.875rem;
    color: var(--text-secondary);
    margin: 0;
}

.segments-table-wrapper {
    overflow-x: auto;
    border-radius: 6px;
    border: 1px solid var(--border-primary);
}

.segments-data-table {
    width: 100%;
    border-collapse: collapse;
    background: var(--bg-primary);
}

.segments-data-table th {
    background: var(--bg-tertiary);
    color: var(--text-primary);
    font-weight: 600;
    font-size: 0.875rem;
    padding: 0.75rem;
    text-align: left;
    border-bottom: 2px solid var(--border-primary);
}

.segments-data-table .segment-name-col {
    min-width: 200px;
}

.segments-data-table .segment-revenue-col {
    min-width: 120px;
    text-align: right;
}

.segments-data-table .segment-percentage-col {
    min-width: 100px;
    text-align: center;
}

.segments-data-table .segment-year-col {
    min-width: 80px;
    text-align: center;
}

.segments-data-table td {
    padding: 0.75rem;
    border-bottom: 1px solid var(--border-primary);
    font-size: 0.875rem;
}

.segments-data-table .segment-name {
    font-weight: 500;
    color: var(--text-primary);
}

.segments-data-table .segment-revenue {
    text-align: right;
    font-weight: 600;
    color: var(--accent-primary);
}

.segments-data-table .segment-percentage {
    text-align: center;
    font-weight: 600;
    color: var(--text-primary);
}

.segments-data-table .segment-year {
    text-align: center;
    color: var(--text-secondary);
}

.segments-data-table tr:hover {
    background: var(--bg-tertiary);
}

/* Company Header */
.company-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 0.75rem;
    background: var(--bg-secondary);
    border-radius: 8px;
    margin-bottom: 1rem;
}

.company-info {
    display: flex;
    align-items: center;
    gap: 1rem;
}

.company-logo {
    width: 3.5rem;
    height: 3.5rem;
    background: var(--accent-primary);
    border-radius: 8px;
    display: flex;
    align-items: center;
    justify-content: center;
    color: white;
    font-size: 1.5rem;
}

.company-name {
    font-size: 1.5rem;
    font-weight: bold;
    color: var(--text-primary);
    margin: 0;
}

.company-meta {
    display: flex;
    gap: 1rem;
    margin-top: 0.5rem;
}

.company-symbol {
    font-size: 1.2rem;
    font-weight: 600;
    color: var(--accent-primary);
}

.company-exchange {
    padding: 0.25rem 0.75rem;
    background: var(--bg-tertiary);
    border-radius: 4px;
    font-size: 0.875rem;
    color: var(--text-tertiary);
}

.company-price {
    text-align: right;
}

.price-value {
    font-size: 1.5rem;
    font-weight: bold;
    color: var(--text-primary);
}

.price-change {
    font-size: 0.875rem;
    margin-top: 0.25rem;
}

/* Company Stats */
.company-stats {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 0.75rem;
    margin-bottom: 1rem;
}

.stat-item {
    padding: 0.75rem;
    background: var(--bg-secondary);
    border-radius: 8px;
    display: flex;
    flex-direction: column;
    gap: 0.5rem;
}

/* Uniform Tab System - REFINED */
.uniform-tabs {
    background: var(--bg-primary);
    border-radius: 12px;
    overflow: hidden;
    border: 1px solid var(--border-primary);
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.04);
}

.tab-nav {
    display: flex;
    background: var(--bg-secondary);
    overflow-x: auto;
    border-bottom: 1px solid var(--border-primary);
    gap: 0;
}

.tab-nav::-webkit-scrollbar {
    height: 0;
}

.uniform-tab-btn {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    padding: 0.875rem 1.25rem;
    background: transparent;
    border: none;
    color: var(--text-secondary);
    cursor: pointer;
    transition: all 0.15s cubic-bezier(0.16, 1, 0.3, 1);
    white-space: nowrap;
    border-bottom: 2px solid transparent;
    font-weight: 500;
    font-size: 0.875rem;
    letter-spacing: -0.01em;
    margin-bottom: -1px;
}

.uniform-tab-btn:hover {
    background: rgba(0, 102, 204, 0.04);
    color: var(--text-primary);
}

.uniform-tab-btn.active {
    background: var(--bg-primary);
    color: var(--accent-primary);
    border-bottom-color: var(--accent-primary);
    font-weight: 600;
}

/* Disabled state for uniform tabs */
.uniform-tab-btn.disabled,
.uniform-tab-btn[aria-disabled="true"] {
    color: var(--text-tertiary);
    opacity: 0.5;
    cursor: not-allowed;
    pointer-events: none;
    border-bottom-color: transparent;
}

.uniform-tab-btn i {
    font-size: 0.9375rem;
    opacity: 0.8;
}

.uniform-tab-btn.active i {
    opacity: 1;
}

/* Tab Content Area */
.tab-content-area {
    min-height: 300px;
}

.uniform-tab-content {
    display: none;
    padding: 1rem;
}

.uniform-tab-content.active {
    display: block;
}

/* Reasoning panel and steps - POLISHED theme-consistent */
#chat-inline-reasoning-panel {
    background: var(--bg-secondary);
    border: 1px solid var(--border-primary);
    border-radius: 10px;
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.04);
}

#chat-inline-reasoning-panel .chat-content {
    color: var(--text-primary);
}

#chat-inline-reasoning-steps .reasoning-step {
    background: transparent;
    border-left: 2px solid transparent;
    padding-left: 12px;
    transition: all 0.2s ease;
    border-radius: 0 6px 6px 0;
    margin: 2px 0;
}

/* Active/processing/completed states use site accent */
#chat-inline-reasoning-steps .reasoning-step.active {
    border-left-color: var(--accent-primary);
    background: rgba(0, 102, 204, 0.04);
}

#chat-inline-reasoning-steps .reasoning-step.processing {
    border-left-color: var(--accent-primary);
    background: rgba(0, 102, 204, 0.04);
}

#chat-inline-reasoning-steps .reasoning-step.completed {
    border-left-color: var(--accent-positive, #059669);
    background: rgba(5, 150, 105, 0.04);
}

#chat-inline-reasoning-steps .reasoning-step .text-xs,
#chat-inline-reasoning-steps .reasoning-step .text-slate-600,
#chat-inline-reasoning-steps .reasoning-step .dark\:text-slate-400 {
    color: var(--text-secondary) !important;
}

#chat-inline-reasoning-steps .reasoning-step .bg-slate-400,
#chat-inline-reasoning-steps .reasoning-step .dark\:bg-slate-500 {
    background-color: var(--accent-primary) !important;
}

/* Mobile adjustments to keep visuals uniform */
@media (max-width: 768px) {
    #chat-inline-reasoning-panel {
        border-radius: 6px;
    }

    #chat-inline-reasoning-steps .reasoning-step {
        padding-left: 10px; /* Keep same as desktop for uniformity */
        border-left-width: 3px; /* Ensure border is same size */
    }
    
    /* Ensure reasoning dots and icons are same size on mobile */
    #chat-inline-reasoning-steps .reasoning-step .w-1 {
        width: 0.25rem;
        height: 0.25rem;
    }
    
    #chat-inline-reasoning-steps .reasoning-step .text-xs {
        font-size: 0.75rem;
        line-height: 1rem;
    }
    
    /* Spacing consistency */
    #chat-inline-reasoning-steps .reasoning-step .flex.items-start {
        gap: 0.625rem; /* Match desktop spacing */
    }
}

.tab-section {
    width: 100%;
}

/* Profile Grid */
.profile-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 1.5rem;
}

.profile-description, .profile-details {
    background: var(--bg-tertiary);
    padding: 1rem;
    border-radius: 8px;
    border: 1px solid var(--border-primary);
}

.profile-description h4, .profile-details h4 {
    font-size: 1.1rem;
    font-weight: 600;
    color: var(--text-primary);
    margin: 0 0 0.75rem 0;
    padding-bottom: 0.5rem;
    border-bottom: 1px solid var(--border-primary);
}

.profile-description p {
    color: var(--text-secondary);
    line-height: 1.7;
    font-size: 0.9rem;
    margin: 0;
}

.detail-list {
    display: flex;
    flex-direction: column;
    gap: 0;
}

.detail-item {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 0.5rem 0;
    border-bottom: 1px solid var(--border-primary);
    min-height: 2rem;
}

.detail-item:last-child {
    border-bottom: none;
}

.detail-key {
    font-weight: 500;
    color: var(--text-secondary);
    font-size: 0.875rem;
    flex-shrink: 0;
    margin-right: 1rem;
}

.detail-value {
    color: var(--text-primary);
    font-weight: 500;
    font-size: 0.875rem;
    text-align: right;
    word-break: break-word;
}

.detail-value a {
    color: var(--accent-primary);
    text-decoration: none;
    word-break: break-all;
}

.detail-value a:hover {
    text-decoration: underline;
}

/* Metrics Grid */
.metrics-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
    gap: 2rem;
}

.metrics-group {
    background: var(--bg-tertiary);
    padding: 1rem;
    border-radius: 8px;
}

.metrics-group h4 {
    font-size: 1.1rem;
    font-weight: 600;
    color: var(--text-primary);
    margin-bottom: 0.75rem;
}

.metric-list {
    display: flex;
    flex-direction: column;
    gap: 0.75rem;
}

.metric-item {
    display: flex;
    justify-content: space-between;
    padding: 0.375rem 0;
    border-bottom: 1px solid var(--border-primary);
}

.metric-key {
    font-weight: 500;
    color: var(--text-secondary);
}

.metric-value {
    color: var(--text-primary);
    font-weight: 600;
}

/* Financial Data - Unified Layout */
.financials-unified-container {
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
}

.financials-unified-container > div {
    width: 100%;
}

/* TTM Data */
.ttm-container {
    background: var(--bg-tertiary);
    border-radius: 8px;
    padding: 1.5rem;
}

.ttm-history-section {
    margin-top: 2rem;
    background: var(--bg-tertiary);
    border-radius: 8px;
    padding: 1.5rem;
}

.ttm-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
    gap: 1.5rem;
}

.ttm-section {
    background: var(--bg-secondary);
    padding: 1rem;
    border-radius: 8px;
}

.ttm-section h4 {
    font-size: 1.1rem;
    font-weight: 600;
    color: var(--text-primary);
    margin-bottom: 0.75rem;
    padding-bottom: 0.5rem;
    border-bottom: 1px solid var(--border-primary);
}

.ttm-data {
    display: flex;
    flex-direction: column;
    gap: 0.75rem;
}

.ttm-item {
    display: flex;
    justify-content: space-between;
    padding: 0.5rem 0;
    border-bottom: 1px solid var(--border-primary);
}

.ttm-label {
    font-weight: 500;
    color: var(--text-secondary);
}

.ttm-value {
    color: var(--text-primary);
    font-weight: 600;
}

.ttm-growth {
    font-size: 0.85em;
    font-weight: 500;
    margin-left: 8px;
    padding: 2px 6px;
    border-radius: 4px;
    background-color: rgba(0, 0, 0, 0.05);
}

.ttm-growth.positive {
    color: #059669;
    background-color: rgba(5, 150, 105, 0.1);
}

.ttm-growth.negative {
    color: #dc2626;
    background-color: rgba(220, 38, 38, 0.1);
}

html.dark .ttm-growth {
    background-color: rgba(255, 255, 255, 0.1);
}

html.dark .ttm-growth.positive {
    background-color: rgba(5, 150, 105, 0.2);
}

html.dark .ttm-growth.negative {
    background-color: rgba(220, 38, 38, 0.2);
}

/* TTM History Table Styles */
.ttm-history-table-container {
    background: var(--bg-tertiary);
    border-radius: 8px;
    padding: 1rem;
    margin-top: 1rem;
}

.ttm-history-header {
    margin-bottom: 1rem;
}

.ttm-history-header h4 {
    font-size: 1.25rem;
    font-weight: 600;
    color: var(--text-primary);
    margin: 0 0 0.5rem 0;
}

.ttm-history-header p {
    color: var(--text-secondary);
    margin: 0;
    font-size: 0.9rem;
}

.ttm-history-table-wrapper {
    overflow-x: auto;
}

.ttm-history-table {
    width: 100%;
    border-collapse: collapse;
    background: var(--bg-secondary);
    border-radius: 8px;
    overflow: hidden;
}

.ttm-history-table th {
    background: var(--bg-primary);
    color: var(--text-primary);
    font-weight: 600;
    padding: 1rem;
    text-align: left;
    border-bottom: 2px solid var(--border-primary);
    white-space: nowrap;
}

.ttm-history-table td {
    padding: 1rem;
    border-bottom: 1px solid var(--border-primary);
    color: var(--text-secondary);
}

.ttm-history-table tbody tr:hover {
    background: var(--bg-tertiary);
}

.ttm-history-row:last-child td {
    border-bottom: none;
}

.ttm-period {
    min-width: 120px;
}

.period-info {
    display: flex;
    flex-direction: column;
    gap: 0.25rem;
}

.period-label {
    font-weight: 600;
    color: var(--text-primary);
}

.period-date {
    font-size: 0.85rem;
    color: var(--text-tertiary);
}

.ttm-revenue,
.ttm-net-income,
.ttm-operating-cf,
.ttm-free-cf,
.ttm-total-assets,
.ttm-cash {
    font-weight: 600;
    white-space: nowrap;
}

/* Dark mode adjustments */
html.dark .ttm-history-table-container {
    background: var(--slate-800);
}

html.dark .ttm-history-table {
    background: var(--slate-700);
}

html.dark .ttm-history-table th {
    background: var(--slate-600);
}

html.dark .ttm-history-table tbody tr:hover {
    background: var(--slate-600);
}

/* Segments */
.segments-container {
    background: var(--bg-tertiary);
    border-radius: 8px;
    padding: 1rem;
}

.segments-data {
    min-height: 300px;
}

.segments-table {
    background: var(--bg-secondary);
    border-radius: 8px;
    overflow: hidden;
}

.table-header {
    display: grid;
    grid-template-columns: 2fr 1fr 1fr 1fr;
    background: var(--bg-primary);
    border-bottom: 2px solid var(--border-primary);
}

.header-cell {
    padding: 1rem;
    font-weight: 600;
    color: var(--text-primary);
    border-right: 1px solid var(--border-primary);
}

.header-cell:last-child {
    border-right: none;
}

.table-body {
    max-height: 400px;
    overflow-y: auto;
}

.table-row {
    display: grid;
    grid-template-columns: 2fr 1fr 1fr 1fr;
    border-bottom: 1px solid var(--border-primary);
}

.table-row:hover {
    background: var(--bg-tertiary);
}

.table-cell {
    padding: 1rem;
    color: var(--text-secondary);
    border-right: 1px solid var(--border-primary);
}

.table-cell:last-child {
    border-right: none;
}

.segment-name {
    font-weight: 500;
    color: var(--text-primary);
}

.segment-revenue {
    font-weight: 600;
    color: var(--accent-primary);
}

.segment-percentage {
    font-weight: 600;
    color: var(--text-primary);
}

/* Loading and Error States - REFINED */
.data-loading {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 0.75rem;
    padding: 2rem;
    color: var(--text-secondary);
    font-size: 0.875rem;
}

.data-loading i {
    font-size: 1.125rem;
    color: var(--accent-primary);
    animation: spin 1s linear infinite;
}

.no-data, .error-message {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    gap: 0.75rem;
    padding: 2.5rem 1.5rem;
    color: var(--text-secondary);
    text-align: center;
    background: var(--bg-secondary);
    border-radius: 12px;
    border: 1px dashed var(--border-primary);
    margin: 1rem 0;
    font-size: 0.875rem;
}

.no-data {
    color: var(--text-tertiary);
}

.no-data i {
    color: var(--text-quaternary);
    font-size: 1.75rem;
    opacity: 0.6;
}

.error-message {
    color: #b91c1c;
    background: #fef2f2;
    border-color: #fecaca;
    border-style: solid;
}

.error-message i {
    color: #dc2626;
    font-size: 1.75rem;
}

/* Dark mode adjustments for states */
html.dark .no-data {
    background: var(--slate-800);
    border-color: var(--slate-600);
}

html.dark .error-message {
    background: #7f1d1d;
    border-color: #dc2626;
    color: #fecaca;
}

html.dark .error-message i {
    color: #fecaca;
}

/* Company Actions */
.company-actions {
    display: flex;
    justify-content: flex-end;
    padding-top: 1rem;
    margin-top: 1rem;
    border-top: 1px solid var(--border-primary);
}

.btn {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    padding: 0.75rem 1.5rem;
    border-radius: 6px;
    cursor: pointer;
    transition: all 0.2s;
    font-weight: 500;
    border: none;
}

.btn-secondary {
    background: var(--bg-tertiary);
    color: var(--text-secondary);
}

.btn-secondary:hover {
    background: var(--bg-secondary);
    color: var(--text-primary);
}

/* Responsive Design */
@media (max-width: 768px) {
    .company-header {
        flex-direction: column;
        gap: 1rem;
        text-align: center;
    }
    
    .company-stats {
        grid-template-columns: 1fr;
    }
    
    .profile-grid, .metrics-grid, .ttm-grid {
        grid-template-columns: 1fr;
    }
    
    .tab-nav {
        flex-direction: column;
    }
    
    .uniform-tab-btn {
        justify-content: center;
    }
    
    /* Responsive financial tables */
    .financial-data-table .metric-header {
        position: static;
    }
    
    .financial-data-table .metric-label {
        position: static;
    }
    
    .financial-table-wrapper,
    .segments-table-wrapper {
        overflow-x: auto;
        -webkit-overflow-scrolling: touch;
    }
    
    .financial-data-table,
    .segments-data-table {
        min-width: 600px;
    }
    
    /* Stack profile items vertically on mobile */
    .detail-item {
        flex-direction: column;
        align-items: flex-start;
        gap: 0.5rem;
        text-align: left;
    }
    
    .detail-key {
        margin-right: 0;
    }
    
    .detail-value {
        text-align: left;
    }
}

@media (max-width: 480px) {
    .company-profile-container {
        padding: 0.75rem;
    }
    
    .financial-table-container,
    .segments-table-container {
        padding: 0.5rem;
    }
    
    .uniform-tab-btn {
        padding: 0.75rem 1rem;
        font-size: 0.875rem;
    }
    
    .financial-data-table th,
    .financial-data-table td,
    .segments-data-table th,
    .segments-data-table td {
        padding: 0.5rem;
        font-size: 0.8rem;
    }
}

/* ========================================
   ERROR REPORTING MODAL STYLES
   ======================================== */

#errorReportingModal {
    backdrop-filter: blur(4px);
    z-index: 9999999 !important; /* Higher than search suggestions */
}

#errorReportingModal .card {
    max-width: 500px;
    width: 100%;
    animation: modalSlideIn 0.3s ease-out;
}

@keyframes modalSlideIn {
    from {
        opacity: 0;
        transform: translateY(-20px) scale(0.95);
    }
    to {
        opacity: 1;
        transform: translateY(0) scale(1);
    }
}

#errorReportingModal .bg-blue-50 {
    background-color: rgba(59, 130, 246, 0.05);
}

#errorReportingModal .bg-blue-900\/20 {
    background-color: rgba(30, 58, 138, 0.2);
}

#errorReportingModal .border-blue-200 {
    border-color: rgba(59, 130, 246, 0.2);
}

#errorReportingModal .border-blue-700 {
    border-color: rgba(29, 78, 216, 0.7);
}

#errorReportingModal .text-blue-800 {
    color: rgb(30, 58, 138);
}

#errorReportingModal .text-blue-200 {
    color: rgb(191, 219, 254);
}

#errorReportingModal .text-blue-700 {
    color: rgb(29, 78, 216);
}

#errorReportingModal .text-blue-300 {
    color: rgb(147, 197, 253);
}

#errorReportingModal .text-blue-600 {
    color: rgb(37, 99, 235);
}

#errorReportingModal .text-blue-400 {
    color: rgb(96, 165, 250);
}

/* Dark mode adjustments for error reporting modal */
html.dark #errorReportingModal .bg-blue-50 {
    background-color: rgba(59, 130, 246, 0.1);
}

html.dark #errorReportingModal .bg-blue-900\/20 {
    background-color: rgba(30, 58, 138, 0.3);
}

html.dark #errorReportingModal .border-blue-200 {
    border-color: rgba(59, 130, 246, 0.3);
}

html.dark #errorReportingModal .border-blue-700 {
    border-color: rgba(29, 78, 216, 0.8);
}

html.dark #errorReportingModal .text-blue-800 {
    color: rgb(191, 219, 254);
}

html.dark #errorReportingModal .text-blue-200 {
    color: rgb(30, 58, 138);
}

html.dark #errorReportingModal .text-blue-700 {
    color: rgb(147, 197, 253);
}

html.dark #errorReportingModal .text-blue-300 {
    color: rgb(29, 78, 216);
}

html.dark #errorReportingModal .text-blue-600 {
    color: rgb(96, 165, 250);
}

html.dark #errorReportingModal .text-blue-400 {
    color: rgb(37, 99, 235);
}

/* Error message styling improvements */
.error-message {
    background: var(--bg-primary);
    border: 1px solid var(--border-primary);
    border-radius: 8px;
    overflow: hidden;
}

.error-message .btn {
    font-size: 0.875rem;
    padding: 0.5rem 1rem;
}

.error-message .btn-primary {
    background: var(--accent-primary);
    color: white;
    border: none;
}

.error-message .btn-primary:hover {
    background: var(--accent-primary-hover);
    transform: translateY(-1px);
}

.error-message .btn-secondary {
    background: var(--bg-tertiary);
    color: var(--text-secondary);
    border: 1px solid var(--border-primary);
}

.error-message .btn-secondary:hover {
    background: var(--bg-secondary);
    color: var(--text-primary);
}

/* Responsive design for error buttons */
@media (max-width: 640px) {
    .error-message .flex {
        flex-direction: column;
    }
    
    .error-message .btn {
        width: 100%;
        margin-bottom: 0.5rem;
    }
    
    .error-message .btn:last-child {
        margin-bottom: 0;
    }
}

/* ========================================
   END ERROR REPORTING MODAL STYLES
   ======================================== */

/* ========================================
   ONBOARDING MODAL STYLES
   ======================================== */

/* Onboarding modal content styling */
.onboarding-content {
    line-height: 1.6;
}

/* Onboarding modal backdrop */
#onboardingModal {
    backdrop-filter: blur(4px);
    z-index: 9999999 !important; /* Higher than search suggestions */
}

/* Onboarding modal animations */
#onboardingModal .bg-white {
    animation: fadeInUp 0.3s ease-out;
}

@keyframes fadeInUp {
    from {
        opacity: 0;
        transform: translateY(20px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

/* Onboarding button styles */
#onboardingBtn {
    background-color: var(--bg-tertiary, #f8fafc);
    color: var(--text-secondary, #475569);
    border: 1px solid var(--border-primary, #e2e8f0);
    transition: all 0.2s ease;
}

#onboardingBtn:hover {
    background-color: var(--bg-secondary, #f1f5f9);
    color: var(--text-primary, #1e293b);
    border-color: var(--accent-primary, #3b82f6);
}

/* Dark mode adjustments for onboarding */
html.dark #onboardingBtn {
    background-color: var(--slate-700, #374151);
    color: var(--slate-300, #cbd5e1);
    border-color: var(--slate-600, #475569);
}

html.dark #onboardingBtn:hover {
    background-color: var(--slate-600, #475569);
    color: var(--slate-200, #e2e8f0);
    border-color: var(--blue-400, #60a5fa);
}

/* Onboarding content styling */
.onboarding-step h3 {
    color: var(--text-primary, #1e293b);
    font-weight: 600;
}

.onboarding-step p {
    color: var(--text-secondary, #475569);
    line-height: 1.6;
}

.onboarding-step ul {
    color: var(--text-secondary, #475569);
}

.onboarding-step .bg-bg-tertiary {
    background-color: var(--bg-tertiary, #f8fafc);
    border: 1px solid var(--border-primary, #e2e8f0);
}

html.dark .onboarding-step .bg-bg-tertiary {
    background-color: var(--slate-700, #374151);
    border-color: var(--slate-600, #475569);
}

/* Onboarding navigation buttons */
#prevStep:disabled {
    opacity: 0.5;
    cursor: not-allowed;
}

#prevStep:disabled:hover {
    background-color: var(--bg-tertiary, #f8fafc);
    color: var(--text-tertiary, #64748b);
}

/* ========================================
   END ONBOARDING MODAL STYLES
   ======================================== */

/* Updated help button for error reporting - lighter, theme-aligned */
.help-btn {
    background-color: #e0e7ef !important; /* Light blue-gray, matches modern UIs */
    color: #2563eb !important; /* Tailwind blue-600 */
    border: 1px solid #cbd5e1; /* Tailwind slate-300 */
    border-radius: 0.375rem;
    box-shadow: 0 1px 2px rgba(0,0,0,0.02);
    font-weight: 500;
    transition: background 0.2s, color 0.2s, border 0.2s;
}
.help-btn:hover, .help-btn:focus {
    background-color: #dbeafe !important; /* Tailwind blue-100 */
    color: #1d4ed8 !important; /* Tailwind blue-700 */
    border-color: #93c5fd; /* Tailwind blue-300 */
} 

/* Charting section stock suggestions - ensure always visible */
#chartingStockSuggestions {
    z-index: 999999 !important;
    position: absolute !important;
    background: var(--bg-primary) !important;
    border: 1px solid var(--border-primary) !important;
    border-radius: 8px !important;
    box-shadow: 0 8px 30px rgba(0, 0, 0, 0.15) !important;
    max-height: 300px !important;
    overflow-y: auto !important;
}

#chartingStockSuggestions:not(.hidden) {
    display: block !important;
    visibility: visible !important;
}

/* Stock suggestion items */
.stock-suggestion-item {
    padding: 12px 16px;
    border-bottom: 1px solid var(--border-primary);
    transition: background-color 0.2s ease;
}

.stock-suggestion-item:hover {
    background-color: var(--bg-tertiary) !important;
}

.stock-suggestion-item:last-child {
    border-bottom: none;
}

/* Ensure parent container has proper positioning context */
#chartingStockSearch {
    position: relative;
    z-index: 1;
}

/* Force higher z-index for the entire charting input container */
.charting-stock-container {
    position: relative;
    z-index: 100000;
} 